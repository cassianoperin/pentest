#!/bin/bash

domain=$1

### Controle de 1 variavel


echo "####################################################"
echo "Encontrando Name Servers"
echo "####################################################"
NS=`host -t ns $domain |cut -d" " -f4`
echo $NS

echo "####################################################"
echo "Encontrando Mail Servers"
echo "####################################################"
MX=`host -t mx $domain |cut -d" " -f7`
echo $MX

echo "####################################################"
echo "Tentando transferir zona"
echo "####################################################"
for nameserver in $NS ; do
	echo "Tentando transferir zona do servidor $nameserver:"
	host -l $domain $nameserver
	echo -e "\n\n"
done


echo "####################################################"
echo "Descobrindo subdominios e entradas"
echo "####################################################"
for entradas in $(cat lista_dns.txt) ; do
	host -t A $entradas.$domain |grep "has address"
done


