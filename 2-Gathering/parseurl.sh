#!/bin/bash

EXCEPTIONS="var SETTINGS|--|>|<|favicon|jpg|png"

if [ "$#" -ne 1 ] ; then
   echo "$0 dominio"
   exit 1
fi

#Baixa o index.html
wget -q $1 -O $1.html


#grep -i 'href="' $1.html | cut -d "/" -f3 |grep "\." |sort -u |grep -Ev 'var SETTINGS|--|>|<|favicon' >lista.txt
#grep -i 'href="' $1.html |sed 's/href=/\n&/gi' |grep -i 'href=' | cut -d "/" -f3 |grep "\." |sort -u | cut -d "\"" -f1 |grep -Ev "$EXCEPTIONS"  >lista.txt
grep -ai 'href="' $1.html |sed 's/href=/\n&/gi' |grep -i 'href=' | cut -d "/" -f3 |grep "\." |sort -u | cut -d "\"" -f1 |grep -Ev "$EXCEPTIONS"  > parseurl.list


for site in `cat parseurl.list` ; do host $site ; done |grep -v IPv6 |sed 's/has address/=/' 

rm -rf parseurl.list 
